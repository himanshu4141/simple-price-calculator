{"ast":null,"code":"import { PricingService } from '../../services/pricing.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/pricing.service\";\nimport * as i2 from \"@angular/material/card\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/material/button-toggle\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/select\";\nimport * as i8 from \"@angular/material/core\";\nimport * as i9 from \"@angular/material/slider\";\nimport * as i10 from \"@angular/material/button\";\n\nfunction PriceCalculatorComponent_ng_container_14_mat_option_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const plan_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", plan_r6.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(plan_r6.name);\n  }\n}\n\nfunction PriceCalculatorComponent_ng_container_14_div_13_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"label\");\n    i0.ɵɵtext(2, \"Packages: \");\n    i0.ɵɵelementStart(3, \"strong\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"mat-slider\", 23);\n    i0.ɵɵlistener(\"ngModelChange\", function PriceCalculatorComponent_ng_container_14_div_13_div_7_Template_mat_slider_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const family_r2 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.selections[family_r2.name].packages = $event;\n    })(\"ngModelChange\", function PriceCalculatorComponent_ng_container_14_div_13_div_7_Template_mat_slider_ngModelChange_5_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r12 = i0.ɵɵnextContext(3);\n      return ctx_r12.calculateTotal();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"label\");\n    i0.ɵɵtext(7, \"API Calls per Month: \");\n    i0.ɵɵelementStart(8, \"strong\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"mat-slider\", 24);\n    i0.ɵɵlistener(\"ngModelChange\", function PriceCalculatorComponent_ng_container_14_div_13_div_7_Template_mat_slider_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const family_r2 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.selections[family_r2.name].apiCalls = $event;\n    })(\"ngModelChange\", function PriceCalculatorComponent_ng_container_14_div_13_div_7_Template_mat_slider_ngModelChange_10_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r15 = i0.ɵɵnextContext(3);\n      return ctx_r15.calculateTotal();\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(2);\n    const family_r2 = ctx_r16.$implicit;\n    const i_r3 = ctx_r16.index;\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r7.selections[family_r2.name].packages);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r7.selections[family_r2.name].packages)(\"name\", \"packages-\" + i_r3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r7.selections[family_r2.name].apiCalls);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r7.selections[family_r2.name].apiCalls)(\"name\", \"apiCalls-\" + i_r3);\n  }\n}\n\nfunction PriceCalculatorComponent_ng_container_14_div_13_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"strong\");\n    i0.ɵɵtext(2, \"Subtotal:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const family_r2 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 1, ctx_r8.selections[family_r2.name].totalPrice), \" \");\n  }\n}\n\nfunction PriceCalculatorComponent_ng_container_14_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 19)(2, \"label\");\n    i0.ɵɵtext(3, \"Seats: \");\n    i0.ɵɵelementStart(4, \"strong\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"mat-slider\", 20);\n    i0.ɵɵlistener(\"ngModelChange\", function PriceCalculatorComponent_ng_container_14_div_13_Template_mat_slider_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const family_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.selections[family_r2.name].seats = $event;\n    })(\"ngModelChange\", function PriceCalculatorComponent_ng_container_14_div_13_Template_mat_slider_ngModelChange_6_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      return ctx_r21.calculateTotal();\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(7, PriceCalculatorComponent_ng_container_14_div_13_div_7_Template, 11, 6, \"div\", 21);\n    i0.ɵɵtemplate(8, PriceCalculatorComponent_ng_container_14_div_13_div_8_Template, 5, 3, \"div\", 22);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r22 = i0.ɵɵnextContext();\n    const family_r2 = ctx_r22.$implicit;\n    const i_r3 = ctx_r22.index;\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r5.selections[family_r2.name].seats);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r5.selections[family_r2.name].seats)(\"name\", \"seats-\" + i_r3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.showSignOptions(family_r2.name));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.selections[family_r2.name].totalPrice !== null);\n  }\n}\n\nfunction PriceCalculatorComponent_ng_container_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"mat-card\", 12)(2, \"mat-card-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-card-content\")(5, \"div\", 3)(6, \"mat-form-field\", 13)(7, \"mat-label\");\n    i0.ɵɵtext(8, \"Plan\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"mat-select\", 14);\n    i0.ɵɵlistener(\"ngModelChange\", function PriceCalculatorComponent_ng_container_14_Template_mat_select_ngModelChange_9_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r24);\n      const family_r2 = restoredCtx.$implicit;\n      const ctx_r23 = i0.ɵɵnextContext();\n      return ctx_r23.selections[family_r2.name].selectedPlan = $event;\n    })(\"selectionChange\", function PriceCalculatorComponent_ng_container_14_Template_mat_select_selectionChange_9_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return ctx_r25.calculateTotal();\n    });\n    i0.ɵɵelementStart(10, \"mat-option\", 15);\n    i0.ɵɵtext(11, \"Select a plan\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, PriceCalculatorComponent_ng_container_14_mat_option_12_Template, 2, 2, \"mat-option\", 16);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(13, PriceCalculatorComponent_ng_container_14_div_13_Template, 9, 5, \"div\", 17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const family_r2 = ctx.$implicit;\n    const i_r3 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(family_r2.name);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.selections[family_r2.name].selectedPlan)(\"name\", \"plan-\" + i_r3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.getPlans(family_r2.name));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.selections[family_r2.name].selectedPlan);\n  }\n}\n\nfunction PriceCalculatorComponent_mat_card_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 26)(1, \"h2\");\n    i0.ɵɵtext(2, \"Total Subscription Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 27);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 28);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 2, ctx_r1.combinedTotal));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"per \", ctx_r1.selectedTerm === \"1year\" ? \"year\" : \"3 years\", \"\");\n  }\n}\n\nexport let PriceCalculatorComponent = /*#__PURE__*/(() => {\n  class PriceCalculatorComponent {\n    constructor(pricingService) {\n      this.pricingService = pricingService;\n      this.productFamilies = [];\n      this.selectedTerm = '1year'; // State for each product family\n\n      this.selections = {};\n      this.combinedTotal = null;\n    }\n\n    ngOnInit() {\n      this.pricingService.fetchPricingData().subscribe(data => {\n        if (data && Array.isArray(data.productFamilies)) {\n          this.productFamilies = data.productFamilies; // Initialize state for each family\n\n          for (const family of this.productFamilies) {\n            this.selections[family.name] = {\n              selectedPlan: '',\n              seats: 1,\n              packages: 0,\n              apiCalls: 0,\n              totalPrice: null\n            };\n          }\n        }\n      });\n    }\n\n    getPlans(familyName) {\n      const family = this.productFamilies.find(f => f.name === familyName);\n      return family ? family.plans : [];\n    }\n\n    showSignOptions(familyName) {\n      var _a;\n\n      return familyName === 'Nitro Sign' && !!((_a = this.selections[familyName]) === null || _a === void 0 ? void 0 : _a.selectedPlan);\n    }\n\n    calculateTotal() {\n      let total = 0;\n\n      for (const family of this.productFamilies) {\n        const sel = this.selections[family.name];\n\n        if (!sel.selectedPlan) {\n          sel.totalPrice = null;\n          continue;\n        } // Calculate price breakdown for Nitro Sign (with free packages)\n\n\n        let price = this.pricingService.calculatePrice(family, sel.selectedPlan, sel.seats, sel.packages, sel.apiCalls, this.selectedTerm); // For Nitro Sign, show breakdown\n\n        if (family.name === 'Nitro Sign') {\n          const plan = family.plans.find(p => p.name === sel.selectedPlan);\n\n          if (plan) {\n            const freePackages = (plan.freePackagesPerSeat || 0) * sel.seats;\n            const extraPackages = Math.max(0, sel.packages - freePackages);\n            const packageCost = extraPackages * (plan.packagePrice || 0);\n            const apiCost = sel.apiCalls * (plan.apiPrice || 0);\n            const seatUnitPrice = this.pricingService.getRampPrice(plan, sel.seats, this.selectedTerm);\n            const seatCost = seatUnitPrice * sel.seats;\n            sel.breakdown = {\n              seatCost,\n              packageCost,\n              apiCost,\n              freePackages,\n              extraPackages\n            };\n            price = seatCost + packageCost + apiCost;\n          }\n        } else {\n          // For PDF, just show seat cost\n          const plan = family.plans.find(p => p.name === sel.selectedPlan);\n\n          if (plan) {\n            const seatUnitPrice = this.pricingService.getRampPrice(plan, sel.seats, this.selectedTerm);\n            const seatCost = seatUnitPrice * sel.seats;\n            sel.breakdown = {\n              seatCost,\n              seatUnitPrice\n            };\n          }\n        }\n\n        sel.totalPrice = price;\n        total += sel.totalPrice || 0;\n      }\n\n      this.combinedTotal = total > 0 ? total : null;\n    }\n\n  }\n\n  PriceCalculatorComponent.ɵfac = function PriceCalculatorComponent_Factory(t) {\n    return new (t || PriceCalculatorComponent)(i0.ɵɵdirectiveInject(i1.PricingService));\n  };\n\n  PriceCalculatorComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PriceCalculatorComponent,\n    selectors: [[\"app-price-calculator\"]],\n    decls: 19,\n    vars: 3,\n    consts: [[1, \"calculator-page\"], [1, \"calculator-form\"], [\"autocomplete\", \"off\"], [1, \"form-section\"], [\"name\", \"term\", \"exclusive\", \"\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"value\", \"1year\"], [\"value\", \"3year\"], [1, \"calculator-grid\"], [4, \"ngFor\", \"ngForOf\"], [2, \"text-align\", \"right\", \"margin-top\", \"16px\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"type\", \"button\", 3, \"click\"], [\"class\", \"calculator-summary\", 4, \"ngIf\"], [1, \"family-section\", \"stigg-style\", 2, \"margin-bottom\", \"24px\"], [\"appearance\", \"fill\", 2, \"width\", \"100%\"], [3, \"ngModel\", \"name\", \"ngModelChange\", \"selectionChange\"], [\"value\", \"\", \"disabled\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [3, \"value\"], [1, \"form-section\", \"slider-section\"], [\"min\", \"1\", \"max\", \"100\", \"step\", \"1\", \"thumbLabel\", \"\", \"tickInterval\", \"10\", 3, \"ngModel\", \"name\", \"ngModelChange\"], [\"class\", \"form-section slider-section\", 4, \"ngIf\"], [\"class\", \"family-summary\", \"style\", \"margin-top: 12px;\", 4, \"ngIf\"], [\"min\", \"0\", \"max\", \"100000\", \"step\", \"10\", \"thumbLabel\", \"\", \"tickInterval\", \"10000\", 3, \"ngModel\", \"name\", \"ngModelChange\"], [\"min\", \"0\", \"max\", \"100000\", \"step\", \"100\", \"thumbLabel\", \"\", \"tickInterval\", \"10000\", 3, \"ngModel\", \"name\", \"ngModelChange\"], [1, \"family-summary\", 2, \"margin-top\", \"12px\"], [1, \"calculator-summary\"], [1, \"total-price\"], [1, \"period\"]],\n    template: function PriceCalculatorComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"mat-card\", 1)(2, \"h2\");\n        i0.ɵɵtext(3, \"Price Calculator\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"form\", 2)(5, \"div\", 3)(6, \"label\");\n        i0.ɵɵtext(7, \"Term:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"mat-button-toggle-group\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function PriceCalculatorComponent_Template_mat_button_toggle_group_ngModelChange_8_listener($event) {\n          return ctx.selectedTerm = $event;\n        })(\"change\", function PriceCalculatorComponent_Template_mat_button_toggle_group_change_8_listener() {\n          return ctx.calculateTotal();\n        });\n        i0.ɵɵelementStart(9, \"mat-button-toggle\", 5);\n        i0.ɵɵtext(10, \"1 Year\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"mat-button-toggle\", 6);\n        i0.ɵɵtext(12, \"3 Years\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(13, \"div\", 7);\n        i0.ɵɵtemplate(14, PriceCalculatorComponent_ng_container_14_Template, 14, 5, \"ng-container\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 9)(16, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function PriceCalculatorComponent_Template_button_click_16_listener() {\n          return ctx.calculateTotal();\n        });\n        i0.ɵɵtext(17, \"Calculate Total\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵtemplate(18, PriceCalculatorComponent_mat_card_18_Template, 8, 4, \"mat-card\", 11);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngModel\", ctx.selectedTerm);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.productFamilies);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.combinedTotal !== null);\n      }\n    },\n    directives: [i2.MatCard, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm, i4.MatButtonToggleGroup, i3.NgControlStatus, i3.NgModel, i4.MatButtonToggle, i5.NgForOf, i2.MatCardTitle, i2.MatCardContent, i6.MatFormField, i6.MatLabel, i7.MatSelect, i8.MatOption, i5.NgIf, i9.MatSlider, i10.MatButton],\n    pipes: [i5.CurrencyPipe],\n    styles: [\".calculator-container[_ngcontent-%COMP%]{max-width:400px;margin:2rem auto;background:#fff;border-radius:16px;box-shadow:0 2px 16px #00000014;padding:1.5rem 1.5rem 2rem;display:flex;flex-direction:column;gap:1.5rem}.calculator-header[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:.5rem;color:#222;letter-spacing:-.5px}.calculator-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}label[_ngcontent-%COMP%]{font-weight:500;color:#444;margin-bottom:.25rem;display:block}select[_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{width:100%;padding:.5rem .75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;margin-bottom:1rem;background:#fafbfc;transition:border .2s}select[_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus{border-color:#0070f3;outline:none}.button-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}button[_ngcontent-%COMP%]{background:#0070f3;color:#fff;border:none;border-radius:8px;padding:.75rem 1.5rem;font-size:1rem;font-weight:600;cursor:pointer;transition:background .2s}button[_ngcontent-%COMP%]:disabled{background:#b3c6e0;cursor:not-allowed}button[_ngcontent-%COMP%]:hover:not(:disabled){background:#0059c1}.result-section[_ngcontent-%COMP%]{background:#f5f7fa;border-radius:10px;padding:1.25rem 1rem;margin-top:1.5rem;text-align:center;font-size:1.2rem;color:#1a3a5d;font-weight:500;box-shadow:0 1px 4px #0000000a}.calculator-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2rem;padding:2rem 0}.calculator-form[_ngcontent-%COMP%], .calculator-summary[_ngcontent-%COMP%]{width:100%;max-width:900px;box-sizing:border-box}.calculator-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:2rem;justify-content:space-between}.family-section.stigg-style[_ngcontent-%COMP%]{flex:1 1 350px;min-width:320px;max-width:420px;margin:0 auto 2rem;border:1px solid #e0e0e0;border-radius:16px;box-shadow:0 2px 16px #0000000f;background:#fff;padding-bottom:1rem}mat-card-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;margin-bottom:.5rem}mat-form-field[_ngcontent-%COMP%], .slider-section[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem}mat-slider[_ngcontent-%COMP%]{width:100%;margin-top:.5rem}.family-summary[_ngcontent-%COMP%]{margin-top:.5rem;font-size:1.1rem;color:#1a3a5d}@media (max-width: 600px){.calculator-container[_ngcontent-%COMP%]{padding:.75rem;max-width:100%}.calculator-header[_ngcontent-%COMP%]{font-size:1.2rem}.calculator-form[_ngcontent-%COMP%], .calculator-summary[_ngcontent-%COMP%]{max-width:100%;padding:.5rem}}@media (max-width: 900px){.calculator-grid[_ngcontent-%COMP%]{flex-direction:column;gap:1.5rem}.family-section.stigg-style[_ngcontent-%COMP%]{max-width:100%;min-width:0}}\"]\n  });\n  return PriceCalculatorComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}